<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Wegy ‚ù§Ô∏è</title>
    <style>
        /* --- DISNEY VIBES CSS --- */
        @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;600&display=swap');

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            background: radial-gradient(circle at bottom, #1b2735 0%, #090a0f 100%);
            color: white;
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Loading Screen */
        #loader {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #090a0f;
            z-index: 200;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 105, 180, 0.3);
            border-top: 5px solid #ff69b4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Starry Background */
        .stars {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: transparent;
            box-shadow: 
                10vw 10vh 1px white, 20vw 50vh 1px white, 30vw 20vh 2px white,
                40vw 80vh 1px white, 60vw 10vh 2px white, 80vw 60vh 1px white,
                90vw 20vh 1px white, 50vw 50vh 2px white;
            animation: twinkle 5s infinite alternate;
        }
        @keyframes twinkle {
            0% { opacity: 0.5; transform: translateY(0px); }
            100% { opacity: 1; transform: translateY(-10px); }
        }

        .container {
            text-align: center;
            position: relative;
            z-index: 10;
            width: 90%;
            max-width: 800px;
            opacity: 0; /* Hidden until loaded */
            transition: opacity 1s ease;
        }

        h1 {
            font-family: 'Great Vibes', cursive;
            font-size: 3.5rem;
            text-shadow: 0 0 10px #ff69b4, 0 0 20px #ff69b4;
            margin: 10px 0 20px 0;
            color: #fff0f5;
            line-height: 1.2;
        }

        .video-frame {
            border: 4px solid #d4af37;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.4);
            overflow: hidden;
            background: #000;
            margin: 0 auto 20px auto;
            width: 100%;
            max-width: 600px;
            aspect-ratio: 16/9;
            position: relative;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .buttons {
            display: flex;
            gap: 30px;
            justify-content: center;
            align-items: center;
            height: 80px;
            position: relative;
        }

        button {
            padding: 12px 40px;
            font-size: 1.3rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
            -webkit-tap-highlight-color: transparent;
            z-index: 20;
        }

        #yesBtn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        #yesBtn:active { transform: scale(0.95); }

        #noBtn {
            background: rgba(255, 255, 255, 0.2);
            color: #ddd;
            border: 1px solid rgba(255,255,255,0.4);
            position: relative; /* Default position */
        }

        @media (max-width: 600px) {
            h1 { font-size: 2.5rem; }
            button { padding: 10px 25px; font-size: 1.1rem; }
        }

        /* Success Screen */
        #success-screen {
            display: none;
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.95);
            z-index: 100;
        }

        .success-text {
            font-family: 'Great Vibes', cursive;
            font-size: 4rem;
            color: #ffd700;
            animation: pop 1s ease forwards;
            margin-bottom: 20px;
        }
        @keyframes pop {
            0% { transform: scale(0); }
            80% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

    <div id="loader">
        <div class="spinner"></div>
        <p>Cooking spaghetti... üçù</p>
    </div>

    <div class="stars"></div>

    <div class="container" id="question-screen">
        <div class="video-frame">
            <video id="trampVideo" src="lady_tramp.mp4" muted playsinline webkit-playsinline preload="auto"></video>
        </div>

        <h1>Would you be my valentine Wegy?</h1>

        <div class="buttons">
            <button id="yesBtn">Yes</button>
            <button id="noBtn">No</button>
        </div>
        
        <p style="font-size: 0.8rem; opacity: 0.6; margin-top: 15px;">
            (Move closer to Yes... ‚ú®)
        </p>
    </div>

    <div id="success-screen">
        <h1 class="success-text">YAAAYYYY!!!!</h1>
        <div class="video-frame" style="width: 90%; max-width: 800px;">
            <video id="aladdinVideo" src="aladdin.mp4" playsinline webkit-playsinline></video>
        </div>
    </div>

    <script>
        const trampVideo = document.getElementById('trampVideo');
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const questionScreen = document.getElementById('question-screen');
        const container = document.querySelector('.container');
        const successScreen = document.getElementById('success-screen');
        const aladdinVideo = document.getElementById('aladdinVideo');
        const loader = document.getElementById('loader');

        // ANIMATION CONFIG
        const KISS_TIME = 5.0; // The timestamp of the kiss
        const MAX_DISTANCE = 400; // Pixels distance to start animation
        
        let targetTime = 0;
        let isAnimating = true;

        // --- 1. PRELOADER LOGIC ---
        // Wait for video to have enough data before showing site
        trampVideo.addEventListener('canplaythrough', () => {
            loader.style.opacity = '0';
            setTimeout(() => {
                loader.style.display = 'none';
                container.style.opacity = '1';
            }, 500);
        });
        
        // Fallback: If video is slow, show site anyway after 3 seconds
        setTimeout(() => {
            if(loader.style.display !== 'none'){
                loader.style.opacity = '0';
                setTimeout(() => { loader.style.display = 'none'; container.style.opacity = '1'; }, 500);
            }
        }, 4000);


        // --- 2. SMOOTH ANIMATION LOOP ---
        function animateVideo() {
            if (isAnimating && trampVideo.readyState >= 3) { // 3 = HAVE_FUTURE_DATA
                // Soft damping: Move 10% of the way to the target every frame
                // This removes the "Choppiness" of direct updates
                let diff = targetTime - trampVideo.currentTime;
                
                // If diff is large, jump faster. If small, go slow (Eases in)
                if (Math.abs(diff) > 0.05) {
                    trampVideo.currentTime += diff * 0.15; 
                }
            }
            requestAnimationFrame(animateVideo);
        }
        animateVideo();


        // --- 3. INPUT HANDLER ---
        function handleInput(x, y) {
            const rect = yesBtn.getBoundingClientRect();
            const btnX = rect.left + rect.width / 2;
            const btnY = rect.top + rect.height / 2;
            
            const dist = Math.hypot(x - btnX, y - btnY);

            // Calculate 0.0 to 1.0 (0% to 100%)
            let progress = 1 - (dist / MAX_DISTANCE);
            if (progress < 0) progress = 0;
            if (progress > 1) progress = 1;

            // Make it feel responsive on mobile
            if (window.innerWidth < 600) {
                progress = Math.min(progress * 1.5, 1);
            }

            targetTime = progress * KISS_TIME;
        }

        document.addEventListener('mousemove', (e) => handleInput(e.clientX, e.clientY));
        document.addEventListener('touchmove', (e) => {
            // e.preventDefault(); // Removed to allow some scrolling if needed, handled via CSS
            const touch = e.touches[0];
            handleInput(touch.clientX, touch.clientY);
        }, { passive: true });


        // --- 4. RUNAWAY NO BUTTON ---
        function moveButtonAway() {
            // Screen boundaries
            const padding = 50;
            const maxX = window.innerWidth - noBtn.offsetWidth - padding;
            const maxY = window.innerHeight - noBtn.offsetHeight - padding;

            const randomX = Math.max(padding, Math.random() * maxX);
            const randomY = Math.max(padding, Math.random() * maxY);

            noBtn.style.position = 'fixed';
            noBtn.style.transition = 'top 0.4s ease, left 0.4s ease'; // Smooth fly
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
        }

        noBtn.addEventListener('mouseover', moveButtonAway);
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            moveButtonAway();
        });


        // --- 5. SUCCESS LOGIC ---
        yesBtn.addEventListener('click', () => {
            isAnimating = false;
            questionScreen.style.display = 'none';
            successScreen.style.display = 'flex';
            
            // Ensure audio is on and play
            aladdinVideo.currentTime = 0;
            aladdinVideo.muted = false;
            
            // Promise handling for browsers that block auto-play
            let playPromise = aladdinVideo.play();
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // Play started
                }).catch(error => {
                    console.log("Auto-play prevented");
                    // Show a "Click to play" button if needed, but usually works after a click interaction
                });
            }
        });

    </script>
</body>
</html>